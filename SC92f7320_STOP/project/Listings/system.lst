C51 COMPILER V9.59.0.0   SYSTEM                                                            09/13/2018 09:59:56 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE SYSTEM
OBJECT MODULE PLACED IN .\Objects\system.obj
COMPILER INVOKED BY: D:\keil4\C51\BIN\C51.EXE ..\user\system.c OPTIMIZE(8,SPEED) BROWSE INCDIR(..\lib;..\user;..\user\le
                    -d;..\user\exit;..\user\stop_mode;..\user\TimeOut;..\user\timer;..\user\key) DEBUG OBJECTEXTEND PRINT(.\Listings\system.l
                    -st) TABS(2) OBJECT(.\Objects\system.obj)

line level    source

   1          #include "system.h"
   2          
   3          TIMEOUT_PARA TIMEOUT_Para[2];
   4          unsigned char Flag,Flag_P;
   5          
   6          void System_Init(void)
   7          {
   8   1        TimeOutDet_Init();
   9   1        Led_Init();
  10   1        Timer_Init();
  11   1        Key_Init();
  12   1        Exit_Init();
  13   1        EA = 1;
  14   1      }
  15          
  16          void System_Handle(void)
  17          {
  18   1        P13 = ~P13;
  19   1        #if 1
  20   1        if(!Flag)
  21   1        {
  22   2          Flag = 1;
  23   2          TimeOut_Record(&TIMEOUT_Para[0],Delay_Time);
  24   2          Led_Open();
  25   2          //Flag_P = 1;
  26   2        }
  27   1        if(1 == TimeOutDet_Check(&TIMEOUT_Para[0]))
  28   1        {
  29   2          //Flag_P = 0;
  30   2          #if 1
  31   2          PCON |= 0x02;  //PCON 的 bit1 STOP 位写 1，配置 MCU 进入 STOP 模式  
  32   2          _nop_();       //至少需要 4 个_nop_()
  33   2          _nop_();
  34   2          _nop_();
  35   2          _nop_();
  36   2          _nop_();
  37   2          _nop_();
  38   2          Led_Close();
  39   2          //TR0=1;
  40   2          #endif
  41   2          //Stop_Mode();
  42   2          
  43   2        }
  44   1        #if 0
                if(Key_Down())
                {
                  Led_Open();
                }
                else
                {
                  Led_Close();
                }
                #endif
C51 COMPILER V9.59.0.0   SYSTEM                                                            09/13/2018 09:59:56 PAGE 2   

  54   1        #endif
  55   1        
  56   1      }
  57          
  58          /*****************************************************
  59          *函数名称：void EX0/1/2() interrupt 0/2/10
  60          *函数功能：外部中断初始化
  61          *入口参数：void
  62          *出口参数：void
  63          *****************************************************/
  64          void int0()interrupt 0
  65          {
  66   1        //EINT0  =   0;   //关闭INT0中断
  67   1        //INT0R &= ~(1<<2);   //关闭INT00上升沿中断
  68   1        //Led_Open();
  69   1        //PCON &= ~0x02;  //PCON 的 bit1 STOP 位写 1，配置 MCU 进入 STOP 模式
  70   1        //P26 = ~P26; 
  71   1      }
  72          
  73          void EX1() interrupt  2
  74          {
  75   1         //P26 = ~P26;
  76   1        #if 0
                if(P16 == 0)
                {
                  INT1_flag = 0x10; //INT12产生中断
                }
                if(P17 == 0)
                {
                  INT1_flag = 0x20; //INT13产生中断
                }
                #endif
  86   1      }
  87          
  88          void EX2() interrupt  10
  89          {
  90   1          //P26 = ~P26;
  91   1      }
  92          
  93          /**************************************************
  94          *函数名称：void timer0/1/2() interrupt 1/3/5
  95          *函数功能：定时器中断产生方波
  96          *入口参数：void
  97          *出口参数：void
  98          **************************************************/
  99          void timer0() interrupt 1
 100          {
 101   1        TL0 = (65536 - 1000)%256;
 102   1        TH0 = (65536 - 1000)/256;
 103   1        //P20 = ~P20; 
 104   1        TimeOutDet_DecHandle();
 105   1        
 106   1      }
 107          
 108          void timer1() interrupt 3
 109          {
 110   1        //P21 = ~P21;
 111   1      }
 112          
 113          void Timer2Int(void) interrupt 5
 114          {   
 115   1        TF2 = 0;   //溢出清零
C51 COMPILER V9.59.0.0   SYSTEM                                                            09/13/2018 09:59:56 PAGE 3   

 116   1          //P26 = ~P26;
 117   1      }
 118          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    142    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     10    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
